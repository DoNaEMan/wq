!function(){function t(t,i){this.rootEl="string"==typeof t?document.querySelector(t):t,this.wrapper=this.rootEl.querySelector(".loop-wrapper"),this.wrapperStyle=this.wrapper.style,this.options={slideTime:350,autoPlayTime:5e3,autoPlay:!1,loop:!1,pagination:!1,bezier:"cubic-bezier(0.25, 0.46, 0.45, 0.94)"},xy.utils.extend(this.options,i),this.options.autoPlayTime=this.options.autoPlayTime<3e3?3e3:this.options.autoPlayTime,this.x=0,this.index=0,this.animating=!1,this._init()}t.prototype={version:"1.0.0",_init:function(){var t=this,i=function(t,i,s){t.addEventListener(i,s,!1)};this.style={transform:xy.utils.prefixStyle("transform"),transitionTimingFunction:xy.utils.prefixStyle("transitionTimingFunction"),transitionDuration:xy.utils.prefixStyle("transitionDuration"),transitionDelay:xy.utils.prefixStyle("transitionDelay"),transformOrigin:xy.utils.prefixStyle("transformOrigin")},touch.on(this.wrapper,"dragstart",function(i){t.options.autoPlay&&t.play(!1),t.animating||(t.startTime=(new Date).getTime())}),touch.on(this.wrapper,"drag",function(i){i.stopPropagation(),t._overTthreshold(i.angle)||t.animating||((new Date).getTime()-t.startTime>300&&(t.startTime=(new Date).getTime()),t._drag.call(t,i))}),touch.on(this.wrapper,"dragend",function(i){t.options.autoPlay&&t.play(!0),(new Date).getTime()-t.startTime<300?t._swipeEnd.call(t,i):t._dragEnd.call(t,i)}),i(this.wrapper,"transitionend",this),i(this.wrapper,"webkitTransitionEnd",this),i(this.wrapper,"oTransitionEnd",this),i(this.wrapper,"MSTransitionEnd",this),i(window,"orientationchange",this),i(window,"resize",this),this.resize(),this.options.pagination&&this._initPagination(),this.options.autoPlay&&this._autoPlay()},resize:function(){var t=this.wrapper.querySelectorAll(".loop-slider");if(t){for(t=t.length,1===t&&(this.options.autoPlay=!1,this.options.loop=!1),this.options.loop&&!this.hasAddEl&&(this.hasAddEl=!0,this.sliders=this.wrapper.querySelectorAll(".loop-slider"),this.wrapper.appendChild(this.sliders[0].cloneNode(!0)),this.wrapper.insertBefore(this.sliders[this.sliders.length-1].cloneNode(!0),this.sliders[0]),this.index=1),this.sliders=this.wrapper.querySelectorAll(".loop-slider"),this.slidersNumb=this.sliders.length,this.sliderLength=parseInt(this.rootEl.offsetWidth),this.wrapperStyle.width=this.slidersNumb*this.sliderLength+"px",this.maxSlideX=-this.sliderLength*(this.slidersNumb-1),this.x=-this.index*this.sliderLength,t=0;t<this.slidersNumb;t++)this.sliders[t].style.width=this.sliderLength+"px";this.wrapperStyle[this.style.transitionTimingFunction]=this.options.bezier,this.scrollTo(this.x,0,0)}},_overTthreshold:function(t){return t>30&&t<150||t>-150&&t<-30},_drag:function(t){var i=t.x,s=(t.y,Math.abs(i));s>=this.sliderLength&&(i=i/s*this.sliderLength),this.style.transform&&(i=this.x+i>0?i/3:this.x+i<this.maxSlideX?i/3:i,this.wrapperStyle[this.style.transform]="translate("+(this.x+i)+"px,0px) translateZ(0)")},_dragEnd:function(t){var i=t.x,s=(t.y,Math.abs(i));s>=this.sliderLength&&(i=i/s*this.sliderLength),this.x+=i,this.x=this.x>0?0:this.x<this.maxSlideX?this.maxSlideX:this.x,this.index=Math.round(-this.x/this.sliderLength),this.scrollTo(-this.index*this.sliderLength,0,this.options.slideTime)},_swipeEnd:function(t){"left"===t.direction?(this.index=this.index===this.slidersNumb-1?this.slidersNumb-1:this.index+1,this.scrollTo(-this.index*this.sliderLength,0,this.options.slideTime)):(this.index=0===this.index?0:this.index-1,this.scrollTo(-this.index*this.sliderLength,0,this.options.slideTime))},scrollTo:function(t,i,s){var e=this;this.animating=!0,this.x=t,this.index=Math.round(-t/this.sliderLength),this.wrapperStyle[this.style.transitionDuration]=s+"ms",this.wrapperStyle[this.style.transform]="translate("+t+"px,0px) translateZ(0)",setTimeout(function(){e._scrollEnd.call(e)},s)},_scrollEnd:function(){this.wrapperStyle[this.style.transitionDuration]="0ms",this.wrapperStyle[this.style.transform]="translate("+this.x+"px,0px) translateZ(0)",this.options.loop&&this.index===this.slidersNumb-1?(this.index=1,this.x=-this.sliderLength,this.wrapperStyle[this.style.transform]="translate("+this.x+",0px) translateZ(0)"):this.options.loop&&0===this.index&&(this.index=this.slidersNumb-2,this.x=-this.index*this.sliderLength,this.wrapperStyle[this.style.transform]="translate("+this.x+",0px) translateZ(0)"),this.options.pagination&&this._updatePaginationIndex(),this.animating=!1},_autoPlay:function(){var t=this,i=function(){this.options.loop||this.index!==this.slidersNumb-1?(this._swipeEnd({direction:"left"}),this.timer=setTimeout(s,this.options.autoPlayTime)):(this.index=0,this.x=0,this.scrollTo(0,0,this.options.slideTime),this.timer=setTimeout(s,this.options.autoPlayTime))},s=function(){i.call(t)};this.timer=setTimeout(s,this.options.autoPlayTime)},_initPagination:function(){var t,i,s=0;for(t=this.wrapper.querySelectorAll(".loop-slider").length,this.options.loop&&(t-=2),i='<div class="loop-pagination-box">';s<t;s++)i+='<span class="loop-pagination"></span>';return i+="</div>>",this.rootEl.appendChild(xy.html(i)),this},_updatePaginationIndex:function(){for(var t=this.rootEl.querySelectorAll(".loop-pagination"),i=t.length,s=0;s<i;s++)t[s].classList.remove("active");this.options.loop?t[this.index-1].classList.add("active"):t[this.index].classList.add("active")},play:function(t){t?this._autoPlay():clearTimeout(this.timer)},handleEvent:function(t){switch(t.type){case"orientationchange":case"resize":this.resize(t);break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._scrollEnd(t)}}},window.LoopImg=t}();