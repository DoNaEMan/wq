!function(){function i(i,t){this.rootEl="string"==typeof i?document.querySelector(i):i,this.wrapper=this.rootEl.querySelector(".loop-wrapper"),this.wrapperStyle=this.wrapper.style,this.options={slideTime:350,autoPlayTime:5e3,autoPlay:!1,loop:!1,pagination:!1,ease:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(i){return i*(2-i)}}},xy.utils.extend(this.options,t),this.options.autoPlayTime=this.options.autoPlayTime<3e3?3e3:this.options.autoPlayTime,this.x=0,this.y=0,this.index=0,this.animating=!1,this._init()}i.prototype={version:"1.0.0",_init:function(){var i=this,t=function(i,t,s){i.addEventListener(t,s,!1)};this.style={transform:xy.utils.prefixStyle("transform"),transitionTimingFunction:xy.utils.prefixStyle("transitionTimingFunction"),transitionDuration:xy.utils.prefixStyle("transitionDuration"),transitionDelay:xy.utils.prefixStyle("transitionDelay"),transformOrigin:xy.utils.prefixStyle("transformOrigin")},touch.on(this.wrapper,"dragstart",function(t){i.options.autoPlay&&i.play(!1),i.animating||(i.startTime=(new Date).getTime())}),touch.on(this.wrapper,"drag",function(t){i.animating||((new Date).getTime()-i.startTime>300&&(i.startTime=(new Date).getTime()),i._drag.call(i,t))}),touch.on(this.wrapper,"dragend",function(t){i.options.autoPlay&&i.play(!0),(new Date).getTime()-i.startTime<300?i._swipeEnd.call(i,t):i._dragEnd.call(i,t)}),t(this.wrapper,"transitionend",this),t(this.wrapper,"webkitTransitionEnd",this),t(this.wrapper,"oTransitionEnd",this),t(this.wrapper,"MSTransitionEnd",this),t(window,"orientationchange",this),t(window,"resize",this),this.resize(),this.options.pagination&&this._initPagination(),this.options.autoPlay&&this._autoPlay()},resize:function(){var i=this.wrapper.querySelectorAll(".loop-slider");if(i){for(i=i.length,1===i&&(this.options.autoPlay=!1,this.options.loop=!1),this.options.loop&&!this.hasAddEl&&(this.hasAddEl=!0,this.sliders=this.wrapper.querySelectorAll(".loop-slider"),this.wrapper.appendChild(this.sliders[0].cloneNode(!0)),this.wrapper.insertBefore(this.sliders[this.sliders.length-1].cloneNode(!0),this.sliders[0]),this.index=1),this.sliders=this.wrapper.querySelectorAll(".loop-slider"),this.slidersNumb=this.sliders.length,this.sliderHeight=parseInt(this.rootEl.offsetHeight),this.sliderWidth=parseInt(this.rootEl.offsetWidth),i=0;i<this.slidersNumb;i++)this.sliders[i].style.width=this.sliderWidth+"px",this.sliders[i].style.height=this.sliderHeight+"px","y"==this.options.direction&&(this.sliders[i].style.float="none");"y"==this.options.direction?(this.wrapperStyle.width=this.sliderWidth+"px",this.wrapperStyle.height=this.slidersNumb*this.sliderHeight+"px",this.maxSlideX=0,this.maxSlideY=-this.sliderHeight*(this.slidersNumb-1),this.y=-this.index*this.sliderHeight):(this.wrapperStyle.height=this.sliderHeight+"px",this.wrapperStyle.width=this.slidersNumb*this.sliderWidth+"px",this.maxSlideY=0,this.maxSlideX=-this.sliderWidth*(this.slidersNumb-1),this.x=-this.index*this.sliderWidth),this.wrapperStyle[this.style.transitionTimingFunction]=this.options.ease.style,this.scrollTo(this.x,this.y)}},_drag:function(i){var t,s,e=0,n=0;"y"==this.options.direction?(n=i.y,s=Math.abs(n),s>=this.sliderHeight&&(n=n/s*this.sliderHeight),n=this.y+n>0?this.y+n/3:this.y+n<this.maxSlideY?this.y+n/3:this.y+n):(e=i.x,t=Math.abs(e),t>=this.sliderWidth&&(e=e/t*this.sliderWidth),e=this.x+e>0?this.x+e/3:this.x+e<this.maxSlideX?this.x+e/3:this.x+e),this._translate(e,n)},_dragEnd:function(i){var t,s,e=0,n=0;"y"==this.options.direction?(n=i.y,s=Math.abs(n),s>=this.sliderHeight&&(n=n/s*this.sliderHeight),n=this.y+n,this.y=n>0?0:n<this.maxSlideY?this.maxSlideY:n,this.index=Math.round(-n/this.sliderHeight),n=-this.index*this.sliderHeight):(e=i.x,t=Math.abs(e),t>=this.sliderWidth&&(e=e/t*this.sliderWidth),e=this.x+e,e=e>0?0:e<this.maxSlideX?this.maxSlideX:e,this.index=Math.round(-e/this.sliderWidth),e=-this.index*this.sliderWidth),this.scrollTo(e,n,this.options.slideTime)},_swipeEnd:function(i){var t=0,s=0;"y"==this.options.direction?("up"===i.direction?this.index=this.index===this.slidersNumb-1?this.slidersNumb-1:this.index+1:"down"===i.direction&&(this.index=0===this.index?0:this.index-1),s=-this.index*this.sliderHeight):("left"===i.direction?this.index=this.index===this.slidersNumb-1?this.slidersNumb-1:this.index+1:"right"===i.direction&&(this.index=0===this.index?0:this.index-1),t=-this.index*this.sliderWidth),this.scrollTo(t,s,this.options.slideTime)},scrollTo:function(i,t,s){var e=this;this.animating=!0,this.x=i,this.y=t,"y"==this.options.direction?this.index=Math.round(-t/this.sliderHeight):this.index=Math.round(-i/this.sliderWidth),this.style.transform?(this.wrapperStyle[this.style.transitionDuration]=(s||0)+"ms",this._translate(i,t)):this._animate(i,t,s,this.options.ease.fn),setTimeout(function(){e._scrollEnd.call(e)},s)},_animate:function(i,t,s,e){function n(){var o,p,u,y=(new Date).getTime();if(y>=d)return h._translate(i,t),void(h.animating=!1);y=(y-l)/s,u=e(y),o=(i-r)*u+r,p=(t-a)*u+a,h._translate(o,p),h.isAnimating&&rAF(n)}var h=this,o=this.getComputedPosition(),r=o.x,a=o.y,l=(new Date).getTime(),d=l+s;this.isAnimating=!0,n()},getComputedPosition:function(){var i,t,s=window.getComputedStyle(this.wrapper,null);return this.style.transform?(s=s[this.style.transform].split(")")[0].split(", "),i=+(s[12]||s[4]),t=+(s[13]||s[5])):(i=+s.left.replace(/[^-\d.]/g,""),t=+s.top.replace(/[^-\d.]/g,"")),{x:i,y:t}},_translate:function(i,t){"y"==this.options.direction?i=0:t=0,this.style.transform?this.wrapperStyle[this.style.transform]="translate("+i+"px,"+t+"px) translateZ(0)":(i=Math.round(i),t=Math.round(t),this.wrapperStyle.left=i+"px",this.wrapperStyle.top=t+"px")},_scrollEnd:function(){this.options.loop&&this.index===this.slidersNumb-1?this.index=1:this.options.loop&&0===this.index&&(this.index=this.slidersNumb-2),"y"==this.options.direction?this.y=-this.index*this.sliderHeight:this.x=-this.index*this.sliderWidth,this.wrapperStyle[this.style.transitionDuration]="",this._translate(this.x,this.y),this.options.pagination&&this._updatePaginationIndex(),this.animating=!1},_autoPlay:function(){var i=this,t=function(){this.options.loop||this.index!==this.slidersNumb-1?("y"==this.options.direction?this._swipeEnd({direction:"up"}):this._swipeEnd({direction:"left"}),this.timer=setTimeout(s,this.options.autoPlayTime)):(this.index=0,this.x=0,this.y=0,this.scrollTo(0,0,this.options.slideTime),this.timer=setTimeout(s,this.options.autoPlayTime))},s=function(){t.call(i)};this.timer=setTimeout(s,this.options.autoPlayTime)},_initPagination:function(){var i,t,s=0;for(i=this.wrapper.querySelectorAll(".loop-slider").length,this.options.loop&&(i-=2),t='<div class="loop-pagination-box">';s<i;s++)t+='<span class="loop-pagination"></span>';return t+="</div>>",this.rootEl.appendChild(xy.html(t)),this},_updatePaginationIndex:function(){for(var i=this.rootEl.querySelectorAll(".loop-pagination"),t=i.length,s=0;s<t;s++)i[s].classList.remove("active");this.options.loop?i[this.index-1].classList.add("active"):i[this.index].classList.add("active")},play:function(i){i?this._autoPlay():clearTimeout(this.timer)},handleEvent:function(i){switch(i.type){case"orientationchange":case"resize":this.resize(i);break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._scrollEnd(i)}}},window.LoopImg=i}();